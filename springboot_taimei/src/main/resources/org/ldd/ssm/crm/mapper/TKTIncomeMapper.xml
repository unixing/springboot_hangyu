<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ldd.ssm.crm.mapper.TKTIncomeMapper" >

  <resultMap id="BaseResultMap" type="org.ldd.ssm.crm.domain.TKTIncome" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="Flt_nbr" property="fltNbr" jdbcType="VARCHAR" />
    <result column="Dpt_AirPt_Cd" property="dptAirptCd" jdbcType="VARCHAR" />
    <result column="Arrv_Airpt_Cd" property="arrvAirptCd" jdbcType="VARCHAR" />
    <result column="State" property="state" jdbcType="VARCHAR" />
  </resultMap>
  
  <delete id="deleteTKTIncome" parameterType="java.lang.Long" >
    delete from TKTIncome where id=#{id} </delete>
  
   <insert id="insert" parameterType="org.ldd.ssm.crm.domain.TKTIncome" useGeneratedKeys="true" keyProperty="id">
    insert into TKTIncome (Flt_nbr,Dpt_AirPt_Cd, Arrv_Airpt_Cd,date)
       VALUES  
            (#{fltNbr}, #{dptAirptCd},#{arrvAirptCd},#{date})
  </insert>
  
  <select id="getflightLeg" parameterType="java.lang.String" resultType="java.lang.String">
	select DISTINCT(CONCAT(dpt_AirPt_Cd_itia,'-',arrv_AirPt_Cd_itia))
	from eachflightinfo 
	where flt_nbr=#{fltNbr}  and get_tim=(select max(get_tim) from eachflightinfo where flt_nbr=#{fltNbr})
  </select>
  
  <update id="updateTKTIncome" parameterType="org.ldd.ssm.crm.domain.TKTIncome">
  update set Flt_nbr=#{fltNbr},Dpt_AirPt_Cd=#{dptAirptCd}, Arrv_Airpt_Cd=#{arrvAirptCd}
  where id=#{id}
  </update>
</mapper>